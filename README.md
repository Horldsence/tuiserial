# TuiSerial - 终端串口调试助手

一个用 Rust + Ratatui 构建的现代化 TUI 串口调试工具。

## 功能特性

### 核心功能
- **串口配置**：支持端口选择、波特率、数据位、校验位、停止位、流控制
- **双模式显示**：HEX 和文本两种显示模式
- **实时数据接收**：高效的环形缓冲区，支持最多 10000 行日志
- **自动滚动**：智能自动跟踪最新接收数据
- **快捷操作**：快速切换配置和显示模式

### 交互特性
- **键盘控制**：完整的 vim 风格快捷键支持
- **实时统计**：Tx/Rx 字节数统计

## 快速开始

### 编译

```bash
cd tuiserial
cargo build --release
```

### 运行

```bash
./target/release/tuiserial
```

## 键盘快捷键

| 快捷键 | 功能 |
|--------|------|
| `j` / `↓` | 端口列表向下 |
| `k` / `↑` | 端口列表向上 |
| `l` / `→` | 增加波特率 |
| `h` / `←` | 减少波特率 |
| `x` | 切换 HEX/TEXT 显示模式 |
| `a` | 切换自动滚动 |
| `c` | 清空接收缓冲区 |
| `p` | 切换校验位（None → Even → Odd） |
| `f` | 切换流控制（None → Hardware → Software） |
| `o` | 打开/关闭串口连接 |
| `PgUp` | 向上滚动日志（10行） |
| `PgDn` | 向下滚动日志（10行） |
| `Home` | 跳到日志开头 |
| `End` | 跳到日志末尾 |
| `q` / `ESC` | 退出程序 |

## 鼠标交互

- **滚轮向上**：向上滚动日志（3行）
- **滚轮向下**：向下滚动日志（3行）

## 架构设计

### 核心原则（Linus 风格）

1. **数据结构优先**：从最小化的数据表示开始
   - `SerialConfig`：单一串口配置结构
   - `RxBuffer`：高效的环形接收缓冲区
   - `AppState`：应用状态管理

2. **消除特殊情况**：UI 直接从数据派生，不需要额外的状态变量

3. **代码简洁**：避免过度抽象，保持代码可读性

### 模块结构

```
src/
├── main.rs      # 应用入口和事件循环
├── model.rs     # 数据结构定义
├── serial.rs    # 串口通信相关函数
├── ui.rs        # UI 渲染逻辑
└── handler.rs   # 串口连接管理
```

## 技术栈

- **Ratatui 0.29**：现代的 Rust TUI 框架
- **Crossterm 0.28**：跨平台终端控制
- **Serialport 4.3**：跨平台串口访问
- **Tokio 1.40**：异步运行时（预留）

## 开发状态

### 已实现
- ✅ 串口配置管理（波特率、数据位、校验位、停止位、流控制）
- ✅ 数据接收显示（HEX/TEXT 模式）
- ✅ 键盘快捷键
- ✅ 鼠标交互
- ✅ 自动滚动
- ✅ 实时统计

### 计划中
- 🔄 数据发送功能
- 🔄 命令预设和快速发送
- 🔄 日志导出（CSV/JSON）
- 🔄 搜索和过滤
- 🔄 数据分析和可视化

## 许可证

MIT

## 联系方式

提交 Issue 或 PR 来帮助改进这个项目。
